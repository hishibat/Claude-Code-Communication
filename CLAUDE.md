# Daily Sharings System

## Overview
日々の活動・思考・課題を蓄積・分析するシステム。
音声テキスト起こしからClaude Codeで自動整形し、GitHub経由でGoogle Driveへ自動同期。

---

## トリガー条件（重要）

**このシステムは、ユーザーが明示的に記録を指示した場合のみ動作する。**

通常の会話・質問・システム改修リクエストと区別するため、以下のようなトリガーフレーズが必要：

| トリガーフレーズ例 |
|------------------|
| 「daily sharingとして記録して」 |
| 「これを記録して」 |
| 「sharing記録：〜」 |
| 「ログとして保存して」 |

**トリガーがない場合は、通常のClaude Codeとして応答する（コード修正、質問回答など）。**

---

## 必須要件（厳守）

**Daily Sharing記録時は、以下の保存を必ず実行すること：**

| # | 保存先 | 必須 | 方法 |
|---|--------|------|------|
| 1 | GitHub `entries/` | ✅ | Write → git add → commit → push |
| 2 | Google Drive (MD + Docs) | ✅ | 自動（GitHub Actions） |

### 実装方法

```bash
# 1. ファイル作成
Tool: Write
  file_path: entries/{YYYY-MM-DD-HHMM-slug}.md

# 2. Git commit & push
Tool: Bash
  command: git add entries/{slug}.md && git commit -m "docs: add {slug}" && git push

# 3. 結果確認（必要に応じて）
Tool: Bash
  command: gh run list --limit 1
```

**GitHub Actionsが失敗した場合：**
- `gh run list` で状態を確認
- `gh run view <run-id>` で詳細ログを確認

---

## クイック入力フロー

ユーザーが**明示的に記録を指示したら**、以下のフローで自動処理：

```
1. 音声テキスト受け取り → 原文を保存用に確保
2. カテゴリ・タグ自動判定
3. 時間情報の自動付与（時間帯・曜日・種別）
4. 関係者の抽出（人名検出）
5. 気分・エネルギー・ストレスの推定
6. 内容の整形（段落分け、読みやすく）
7. 気づき・アクションの抽出
8. サマリー生成（1-2文）
9. タイトル生成（10-20文字）
10. MDファイル組み立て
11. Git commit & push（→ GitHub ActionsでGoogle Driveへ自動同期）
```

---

## フォーマット仕様

### ファイル命名規則
```
YYYY-MM-DD-HHMM-{short-slug}.md
```
- `short-slug`: 内容を2-3語で要約（英語、ハイフン区切り）
- 例: `2026-01-24-2030-client-meeting.md`

### Google Drive保存先
```
Daily_Sharings/{year}/{month}-{month_name}/entries/
```
例: `Daily_Sharings/2026/01-January/entries/2026-01-24-2030-client-meeting.md`

---

## Frontmatterフィールド定義

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| 記録日時 | ISO8601 | ✅ | `2026-01-24T20:30:00+09:00` |
| カテゴリ | string | ✅ | 活動/思考/課題/アクション/振り返り/目標 |
| タグ | array | ✅ | `[仕事, プロジェクト, チーム]` |
| 時間帯 | string | ✅ | 朝/午前/午後/夕方/夜/深夜 |
| 曜日 | string | ✅ | 月曜日〜日曜日 |
| 種別 | string | ✅ | 平日/週末/祝日 |
| 気分 | number | ⚪ | 1-5スケール（推定できる場合のみ） |
| エネルギー | number | ⚪ | 1-5スケール（推定できる場合のみ） |
| ストレス | number | ⚪ | 1-5スケール（推定できる場合のみ） |
| 関係者 | array | ⚪ | 登場人物 `[田中さん, 佐藤部長]` |
| 関連目標 | array | ⚪ | 将来のOKRリンク用（空配列） |
| 入力時間 | string | ⚪ | 音声の長さ（提供された場合） |
| 文字数 | number | ⚪ | 原文の文字数 |

---

## カテゴリ判定ルール

| カテゴリ | 判定キーワード |
|---------|--------------|
| 活動 | やった、完了、終わった、行った、参加、実施、会議、打ち合わせ |
| 思考 | 思う、感じた、気づいた、考えた、なんか、かも |
| 課題 | 困っている、問題、難しい、課題、悩み、うまくいかない |
| アクション | する、やる、TODO、タスク、予定、しないと、必要 |
| 振り返り | 今日、今週、学んだ、反省、振り返り、良かった |
| 目標 | 目標、達成、ゴール、OKR、Q1、Q2、年間 |

**判定優先度**: アクション > 課題 > 活動 > 振り返り > 目標 > 思考

---

## タグ自動検出ルール

| タグ | キーワード |
|------|-----------|
| 仕事 | 仕事、クライアント、会議、発表、プロジェクト、チーム、上司、部下 |
| 個人 | 個人、プライベート、家族、友人、趣味 |
| 健康 | 健康、運動、食事、睡眠、体調、病院、疲れ |
| 学習 | 勉強、学習、読書、コース、資格、本、セミナー |
| 生産性 | 生産性、効率、時間管理、ツール、習慣 |
| お金 | お金、投資、節約、給料、支出、買い物 |
| 人間関係 | 関係、コミュニケーション、相談、話し合い |

---

## 時間帯判定

| 時間帯 | 時刻範囲 |
|-------|---------|
| 深夜 | 00:00-05:59 |
| 朝 | 06:00-08:59 |
| 午前 | 09:00-11:59 |
| 午後 | 12:00-16:59 |
| 夕方 | 17:00-19:59 |
| 夜 | 20:00-23:59 |

---

## コンディション推定ルール

文脈から自動推定（明示的な言及がない場合は省略）

### 気分 (1-5)
| 値 | 表現例 |
|----|--------|
| 1 | 最悪、落ち込んでる、辛い、しんどい |
| 2 | あまり良くない、微妙、もやもや |
| 3 | 普通、まあまあ、特になし |
| 4 | 良い、楽しい、嬉しい |
| 5 | 最高、ワクワク、幸せ、絶好調 |

### エネルギー (1-5)
| 値 | 表現例 |
|----|--------|
| 1 | 疲れ果てた、動けない、ヘトヘト |
| 2 | 疲れた、だるい、眠い |
| 3 | 普通、まあまあ |
| 4 | 元気、調子いい、やる気ある |
| 5 | 絶好調、やる気満々、充実 |

### ストレス (1-5)
| 値 | 表現例 |
|----|--------|
| 1 | なし、リラックス、穏やか |
| 2 | 少し気になる、ちょっと |
| 3 | そこそこ、普通に |
| 4 | 結構ある、プレッシャー |
| 5 | かなり高い、限界、パンク |

---

## Bodyセクション構成

| セクション | 必須 | 説明 |
|-----------|------|------|
| # タイトル | ✅ | 内容を端的に表す見出し（10-20文字） |
| ## サマリー | ✅ | 1-2文での要約 |
| ## 詳細 | ✅ | 整形された本文（読みやすく段落分け） |
| ## 気づき | ⚪ | 思考・学びがあれば箇条書き |
| ## アクション | ⚪ | 抽出されたTODOがあればチェックリスト形式 |
| 原文 | ✅ | `<details>`で折りたたみ、生テキスト保存 |

---

## 出力サンプル

```markdown
---
# === 基本情報 ===
記録日時: 2026-01-24T20:30:00+09:00
カテゴリ: 思考
タグ: [仕事, プロジェクト, チーム]

# === コンテキスト ===
時間帯: 夜
曜日: 金曜日
種別: 平日

# === コンディション ===
気分: 4
エネルギー: 3
ストレス: 2

# === 関係者 ===
関係者: [田中さん, 佐藤部長]

# === 目標リンク（将来用） ===
関連目標: []

# === メタ ===
文字数: 180
---

# クライアント会議の振り返り

## サマリー
午後のクライアント会議でプロジェクト方針が決定。来週までにプロトタイプ準備が必要。

## 詳細
今日の午後、田中さんと一緒にクライアント先での会議に参加した。
佐藤部長からプロジェクトの方向性について説明があり、当初の予定より前倒しで進めることになった。

チーム全体の負荷が心配だが、やりがいのある仕事だと感じている。

## 気づき
- 事前準備の重要性を再認識
- チーム内のコミュニケーションをもっと増やすべき

## アクション
- [ ] プロトタイプのワイヤーフレーム作成（〜1/27）
- [ ] チームメンバーへの共有ミーティング設定

---

<details>
<summary>原文（音声テキスト起こし）</summary>

えーと今日の午後ね、田中さんと一緒にクライアント先行ってきたんだけど、
佐藤部長からプロジェクトの話があってさ、なんか当初より早く進めることになって、
ちょっと大変だけどやりがいあるなって思った。
来週までにプロトタイプ作らないといけないから、明日チームに共有しないと。

</details>
```

---

## GitHub Actions同期（デュアルフォーマット）

**pushトリガーで自動同期**により、データ利活用とNotebookLM互換性の両方を確保する。

### アーキテクチャ

```
[Claude Code] → Write → entries/ → git commit & push
                                        ↓
                              [GitHub Actions]
                                        ↓
                              Google Drive (MD + Docs)
```

### 保存されるファイル

| 保存先 | 形式 | 用途 |
|--------|------|------|
| **GitHub** `entries/{slug}.md` | Markdown | **原本**・Git管理・バージョン履歴 |
| **Google Drive** `{slug}.md` | Markdown | クラウドバックアップ・データ利活用 |
| **Google Drive** `{slug}` | Google Docs | NotebookLM閲覧・AI分析用 |

### ローカルフォルダ構成

```
daily_sharings/
├── .github/
│   ├── workflows/
│   │   └── sync-to-gdrive.yml  # GitHub Actions定義
│   └── scripts/
│       └── upload-to-gdrive.js # アップロードスクリプト
├── entries/                    # MDファイル保存先（Git管理）
│   ├── 2026-01-23-2100-expat-workstyle-reflection.md
│   ├── 2026-01-24-2330-vibe-coding-reflection.md
│   └── ...
├── CLAUDE.md
└── README.md
```

### 同期確認コマンド

```bash
# ワークフロー実行状況確認
gh run list --limit 3

# 最新実行の詳細
gh run view $(gh run list --limit 1 --json databaseId -q '.[0].databaseId')
```

### NotebookLM互換性について

**重要**: NotebookLMのGoogle Driveファイルピッカーは、**Google DocsとGoogle Slidesのみ**を表示する。

| 形式 | NotebookLM | データ利活用 |
|------|-----------|-------------|
| Google Docs | ✅ 認識される | △ エクスポート必要 |
| .md ファイル | ❌ 表示されない | ✅ そのまま利用可能 |

### 原本の定義

- **MD形式（GitHub）が原本**（Single Source of Truth）
- Google Docsは閲覧・分析用の派生コピー
- 編集が必要な場合はMD形式を修正し、再度push

---

## エラーハンドリング

1. **git push失敗時** → ネットワーク確認、`git status`で状態確認
2. **GitHub Actions失敗時** → `gh run view`でログ確認、Secrets設定を確認
3. **Google Drive APIエラー時** → Service Account権限、フォルダ共有設定を確認

---

## 将来拡張予定

- [ ] 日次/週次サマリー自動生成
- [ ] OKR連携（関連目標フィールドの活用）
- [ ] NotebookLMでの分析レポート
- [ ] 感情・エネルギーの時系列可視化
